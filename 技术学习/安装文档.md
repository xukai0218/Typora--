[TOC]



# 一、虚拟机安装



## **1、VMware Workstation Pro set**

```
新建虚拟机
自定义
稍后安装系统
选版本
网络连接-NAT
默认推荐
创建新的虚拟磁盘
拆分多个文件
自定义硬件 CD/DVD(SATA)选择ISO映像文件
```

## **2、启动虚拟机设置**

````
语言 时间 设置
软件 
  安装源默认 
  软件选择最小安装
手动分区
/boot 500m
/swap 4G
系统 
安装位置
swap一般是内存的2倍 如果内容很大的话就内存大小一样 一般8G内存开始就1倍
一般web开吧不要设swap
如果内存满了就让它报错

KDUMP 禁用 这个干吗用不知道 #用就好了

网络和主机名设置
以太网打开  这是动态IP吧

配置  常规  勾选  可用时自动链接到这个网络
然后设置什么
地址 = Ip
网关 = 默认路由 = DNS服务器
设置主机名 
结束
````

## **3、linux Yum 配置**

```
最小化安装rhel7.4
0 光驱加入iso镜像
	右键  可移动设备 cd 连接
1 将iso镜像挂在到 /mnt下
	mount /dev/sr0 /mnt

2 配置yum源
	touch /etc/yum.repo.d/local.repo
	vim /etc/yum.repo.d/local.repo
	
	[base]
	name=local
	baseurl=file:///mnt
	gpgcheck=0
	
3 检查yum
	yum repolist 
		运行结果有包
		
4 安装图形化界面(yum安装成功后)
	yum grouplist  查看有哪些gourp安装包
	yum -y groupinstall "Server with GUI" 安装图形化界面
5 进入图形化界面
	startx
6 关闭selinux 关闭firewalld
	vim /etc/selinux/config
	SELINUX=disabled
```

## **4、克隆**

```
克隆
右键管理 --》克隆 --》虚拟机当中 --》 创建连接克隆
备份 目录   rhel76.vmx	
```

## **5、静态IP配置**

```
配置文件 vi /etc/sysconfig/network-scripts/ifcfg-ens33
图形界面nm-connection-editor
service network restart  #重新启动
```

## **6、xshell 连接虚拟机异常**

1.连接xshell需要开通虚拟机的22端口

2、查看想开的端口是否已开     打印no表示未开启

```
firewall-cmd --query-port=22/tcp
```

3、开启永久端口号 #   打印success 表示开启端口成功 

```
firewall-cmd --add-port=22/tcp --permanent
```

4、重新载入配置 

```
firewall-cmd --reload
```

5、再次查看22端口是否开启     打印yes

```
firewall-cmd --query-port=22/tcp
```

## 7、连接外网异常参考

```
NAT模式 配置静态ip 连接外网 xshell连接虚拟机
https://www.cnblogs.com/lishiwei/p/10823206.html
```

# 二、mysql安装

## 1、准备

```
联网情况
wget https://repo.mysql.com//mysql80-community-release-el7-3.noarch.rpm
不能联网情况 本地安装包 
https://cdn.mysql.com//Downloads/MySQL-8.0/mysql-8.0.17-1.el7.x86_64.rpm-bundle.tar
yum install *.rpm
mysql8.0的rpm安装包 将所有的安装包放在指定目录下(eg:mysql)
进入mysql目录,执行下面命令
yum localinstall `ls`
```

## 2、初始化

```
vim /etc/my.cnf	
增加skip-grant-tables	

启动mysql服务	
systemctl start mysqld

启动成功后使用root登录mysql
mysql -uroot

登录成功后设置mysql root账户的密码
alter user 'root'@'localhost' identified by 'mysql'; 
mysql_secure_installation

mysql -uroot -pmysql

开机启动服务
systemctl enable mysqld

改密码 
ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '1qwe32!QWE#@'

```

## 3、问题

1、本地连不上  mysql  ：Host is not allowed to connnect this  MySQl	

```
mysql -uroot -pmysql	
use mysql;
update user set Host='%'  where user='root';
flush privileges;	
ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '1qwe32!QWE#@'; 
这个语句修改了密码认证方式
(Your password does not satisfy the current policy requirements) 密码不能太简单
```

# 三、Jdk安装

## 1、Linux

```
rpm -qa | grep jdk	查找自带jdk
yum -y remove  	有的话删除自带jdk
下载64位jdk8的压缩包文件，如：jdk-8u121-linux-x64.tar.gz，并放在usr/java文件夹下
切换路径到/usr/java，使用命令：tar -zxvf jdk-8u121-linux-x64.tar.gz 
使用：vim /etc/profile 命令编辑profile文件
    JAVA_HOME=/root/robot/java/jdk1.8.0_211/
    PATH=$JAVA_HONE/bin:$PATH
    CLASSPATH=$JAVA_HOME/jre/lib/ext:$JAVA_HOME/lib/tools.jar
    export PATH JAVA_HOME CLASSPAH
 source /etc/profile 命令使profile文件立即生效
 java –version 命令查看jdk是否安装成功
```

## 2、window

```
1 必须--“变量名”：JAVA_HOME
C:\Program Files\Java\jdk1.7.0_07//你安装的jdk的磁盘路径

2 必须--“变量名”：Path
%Java_Home%\bin;     	配置这个 javac才会成功 配一个也可以
%Java_Home%\jre\bin; 	配置这个 javac不会成功

3  可不配 ClassPath： 1 windows JDK 1.5以后不需要配 在IDE下也不用配  2 Linux下 另说
是javac编译器的一个环境变量，作用是指定类搜索路径。当编译器编译我们写的程序时候，
我们程序里面所以用的那些Jar包以及引入的其他类文件，都需要去这个环境变量声明的目录下去找。
我们需要把jdk安装目录下的lib子目录设置到CLASSPATH中，当然，当前目录“.”

“变量名”：ClassPath 
“变量值”：.;%Java_Home%\bin;%Java_Home%\lib\dt.jar;%Java_Home%\lib\tools.jar

注：上面的代码最好也是一个字符不变的贴上去，“变量值”最前面的 .; 不要漏掉。
验证: 	java -version  	只要配置 JAVA_HOME	就成功
   	  	  java	      	  只要配置 JAVA_HOME	就成功	
	  	  javac	       	  只要配置	%JAVA_HOME\bin; 就成功 

结论：必须  1 JAVA_HOME  2 Path：%Java_Home%\bin;其它随意Eclipse 都能运行
```



# 四、Redis 安装

## 1、安装步骤

```
下载redis压缩包文件，如：redis-3.0.3.tar.gz，并放在/usr/local文件夹下
使用命令：#tar zxvf redis-3.0.3.tar.gz 命令进行解压缩，执行完毕，在/usr/local文件夹中新增：redis-3.0.3 的解压文件夹,并改名为redis-3.0.3.master
切换路径到cd /usr/local/redis-3.0.3.master下，使用：make or make MALLOC=libc 命令编译 
切换路径至cd /usr/local/redis-3.0.3master/src下，后台启动redis-server: 
./redis-server  
开启之后我们执行netstat -tunpl | grep 6379命令来查看6379端口使用情况
```

## 2、参数基本配置

```
1 daemonize yes  
2 requirepass foobared
3 protected-mode进行设置。默认是yes，设置成no
4 把bind 127.0.0.1 给注释掉，如果没有，连接不上
```

3、开机启动 redis ：https://www.jb51.net/article/110286.htm

# 五、Docker安装

## 1、离线安装

[*docker安装包下载地址*](https://download.docker.com/linux/centos/7/x86_64/stable/Packages/)

需要下载的docker安装包：

[[docker-ce-cli-18.09.6-3.el7.x86_64.rpm](https://download.docker.com/linux/centos/7/x86_64/stable/Packages/docker-ce-cli-18.09.6-3.el7.x86_64.rpm)

[docker-ce-18.09.6-3.el7.x86_64.rpm](https://download.docker.com/linux/centos/7/x86_64/stable/Packages/docker-ce-18.09.6-3.el7.x86_64.rpm)

[containerd.io-1.2.5-3.1.el7.x86_64.rpm](https://download.docker.com/linux/centos/7/x86_64/stable/Packages/containerd.io-1.2.5-3.1.el7.x86_64.rpm)

需要依赖的包：

[container-selinux-2.9-4.el7.noarch.rpm](ftp.pbone.net/mirror/ftp.scientificlinux.org/linux/scientific/7x/external_products/extras/x86_64/container-selinux-2.9-4.el7.noarch.rpm)



```
第一步, 卸载残留
sudo yum remove docker \
                  docker-client \
                  docker-client-latest \
                  docker-common \
                  docker-latest \
                  docker-latest-logrotate \
                  docker-logrotate \

安装命令：
yum install -y yum-utils device-mapper-persistent-data lvm2 libseccomp
yum install -y policycoreutils-python

rpm -ivh docker-ce-cli-18.09.6-3.el7.x86_64.rpm
rpm -ivh containerd.io-1.2.5-3.1.el7.x86_64.rpm
rpm -ivh container-selinux-2.9-4.el7.noarch.rpm
rpm -ivh docker-ce-18.09.6-3.el7.x86_64.rpm                 
```

2、镜像加速



```
{
  "registry-mirrors": [
    "https://dockerhub.azk8s.cn",
    "https://reg-mirror.qiniu.com"
  ]
}

#注意，一定要保证该文件符合 json 规范，否则 Docker 将不能启动
```



























































































# 命令

```
nm-connection-editor	图形界面
service network restart 服务重启
------------------------------------
yun 相关
yum repolist 
yum grouplist
---------------------------------------
将iso镜像挂在到 /mnt下
mount /dev/sr0 /mnt
--------------------------------------
防火墙相关
systemctl status firewalld  查看防火墙状态。
systemctl stop firewalld	临时关闭防火墙命令。重启电脑后，防火墙自动起来。
systemctl disable firewalld	永久关闭防火墙命令。重启后，防火墙不会自动启动。
systemctl enable firewalld	打开防火墙命令。	
```

